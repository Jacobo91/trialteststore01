<style>
.grid-for-products {
    display: grid;
    grid-template-columns: repeat(section.settings.products_per_grid_mobile, 1fr);
    gap: 16px;
}

@media screen and (min-width: 480px) {
    .grid-for-products {
        grid-template-columns: repeat(section.settings.products_per_grid_tablet, 1fr);
    }
}

@media screen and (min-width: 1023px) {
    .grid-for-products {
        grid-template-columns: repeat(section.settings.products_per_grid_desktop, 1fr);
    }
}

</style>

<section id="enhanced-collection"> 
    {% paginate collection.products by section.settings.pagination_number %}
        <div id="enhanced-collection__grid" class="grid-for-products">
        {% for product in collection.products %}
                {% render 'enhanced-product-card',
                        product: product,
                %}
        {% endfor %}
        </div>
    {% endpaginate %}
</section>

{% schema %}
    {
        "name": "Enhanced Collection",
        "settings": [
            {
                "type": "number",
                "id": "pagination_number",
                "label": "Products by page",
                "default": 10,
            },
            {
                "type": "number",
                "id": "products_per_grid_mobile",
                "label": "Products per grid mobile",
                "default": 2
            },
            {
                "type": "number",
                "id": "products_per_grid_tablet",
                "label": "Products per grid tablet",
                "default": 3
            },
            {
                "type": "number",
                "id": "products_per_grid_desktop",
                "label": "Products per grid desktop",
                "default": 4
            }
        ],
        "presets": [
            {
                "name": "Enhanced Collection",
                "category": "Custom"
            }
        ]
    }
{% endschema %}